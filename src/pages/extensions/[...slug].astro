---
import { getCollection, render } from 'astro:content';
import type { GetStaticPaths } from 'astro';
import ExtensionLayout from '~/layouts/ExtensionLayout.astro';

export const getStaticPaths = (async () => {
  const extensions = await getCollection('extensions');

  return extensions.map((extension) => ({
    params: { slug: extension.id },
    props: { extension },
  }));
}) satisfies GetStaticPaths;

const { extension } = Astro.props;
const { Content } = await render(extension);
---

<ExtensionLayout
  title={extension.data.title}
  description={extension.data.description}
>
  <Content />

  <div slot="sidebar">
    <div class="bg-blue-50 dark:bg-blue-900/30 rounded-lg p-6">
      <h3 class="font-bold text-lg mb-4">Quick Links</h3>
      <ul class="space-y-2">
        <li>
          <a href={`/guides/zapier/${extension.id}`} class="text-blue-600 dark:text-blue-400 hover:underline">
            → Zapier Setup Guide
          </a>
        </li>
        <li>
          <a href="#" class="text-blue-600 dark:text-blue-400 hover:underline">
            → API Documentation
          </a>
        </li>
        <li>
          <a href="/" class="text-blue-600 dark:text-blue-400 hover:underline">
            → All Extensions
          </a>
        </li>
      </ul>
    </div>
  </div>
</ExtensionLayout>
